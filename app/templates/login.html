{% extends "base.html" %}
{% block titulo %}Iniciar Sesión - TiendaOnline{% endblock %}

{% block contenido %}
<div class="container">
    <div class="formulario-auth">
        <h2><i class="bi bi-box-arrow-in-right"></i> Iniciar Sesión</h2>
        <p class="subtitulo">Accede a tu cuenta para continuar comprando</p>

        <form action="{{ url_for('auth.login') }}" method="POST" id="formLogin" novalidate>
            <div class="form-flotante" id="grupoEmail">
                <label for="email">Correo electrónico</label>
                <input type="email" id="email" name="email" value="{{ email|default('') }}"
                    placeholder="tucorreo@ejemplo.com" required>
                <div class="error-campo" id="errorEmail">Ingresa un correo electrónico válido</div>
            </div>

            <div class="form-flotante" id="grupoPassword">
                <label for="password">Contraseña</label>
                <input type="password" id="password" name="password" placeholder="Tu contraseña" required>
                <div class="error-campo" id="errorPassword">La contraseña es obligatoria</div>
            </div>

            <button type="submit" class="btn-primario w-100 justify-content-center mt-3">
                <i class="bi bi-box-arrow-in-right"></i> Iniciar Sesión
            </button>
        </form>

        <div class="text-center mt-3">
            <span style="color: var(--color-texto-claro);">¿No tienes cuenta?</span>
            <a href="{{ url_for('auth.registro') }}">Regístrate aquí</a>
        </div>


    </div>
</div>
{% endblock %}

{% block scripts_extra %}
<script>
    document.getElementById('formLogin').addEventListener('submit', function (e) {
        let valido = true;
        const email = document.getElementById('email');
        const grupoEmail = document.getElementById('grupoEmail');
        const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!regexEmail.test(email.value)) {
            grupoEmail.classList.add('invalido');
            valido = false;
        } else {
            grupoEmail.classList.remove('invalido');
        }

        const password = document.getElementById('password');
        const grupoPassword = document.getElementById('grupoPassword');
        if (password.value.length === 0) {
            grupoPassword.classList.add('invalido');
            valido = false;
        } else {
            grupoPassword.classList.remove('invalido');
        }

        if (!valido) e.preventDefault();
    });
</script>
{% endblock %}